(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bcd7068"],{"29d7":function(e,s,t){"use strict";t("cdc9")},"2fc2":function(e,s,t){},a1fd:function(e,s,t){"use strict";t("2fc2")},b811:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"page-container"},[t("el-row",[t("el-col",{attrs:{xs:24,span:7}},[t("div",{staticClass:"left"},[t("el-card",{staticStyle:{"background-color":"#F2F6FC"}},[e.loading?e._e():t("div",[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-avatar",{attrs:{size:120}},[t("i",{staticClass:"el-icon-s-custom",staticStyle:{"font-size":"100px"}})])],1),e._v(" "),t("el-row",{staticStyle:{"padding-top":"10px","font-size":"20px"},attrs:{type:"flex",justify:"center"}},[t("b",[e._v(e._s(e.userInfo.username))])]),e._v(" "),t("el-row",{staticStyle:{"padding-top":"10px","font-size":"20px"},attrs:{type:"flex",justify:"center"}},[t("el-tag",{attrs:{type:"success",size:"medium"}},[e._v(e._s("SA"===e.userInfo.role?"超级管理员":"普通管理员"))])],1),e._v(" "),t("el-row",{staticClass:"user-info-item",attrs:{type:"flex",justify:"left"}},[t("i",{staticClass:"el-icon-user"}),e._v(e._s(e.userInfo.realname)+"\n                        ")]),e._v(" "),t("el-row",{staticClass:"user-info-item",attrs:{type:"flex",justify:"left"}},[t("i",{staticClass:"el-icon-collection-tag"}),e._v(" "+e._s(e.userInfo.deptName)+"\n                        ")]),e._v(" "),t("el-row",{staticClass:"user-info-item",attrs:{type:"flex",justify:"left"}},[t("i",{staticClass:"el-icon-postcard"}),e._v(e._s(e.userInfo.jobName)+"\n                        ")]),e._v(" "),t("el-row",{staticClass:"user-info-item",attrs:{type:"flex",justify:"left"}},[t("i",{staticClass:"el-icon-phone-outline"}),e._v(e._s(e.userInfo.phoneNumber)+"\n                        ")]),e._v(" "),t("el-row",{staticClass:"user-info-item",attrs:{type:"flex",justify:"left"}},[t("i",{staticClass:"el-icon-date"}),e._v(e._s(e.userInfo.email)+"\n                        ")])],1),e._v(" "),t("el-skeleton",{attrs:{loading:e.loading,rows:9,animated:""}})],1)],1)]),e._v(" "),t("el-col",{attrs:{xs:24,span:17}},[t("div",{staticClass:"right"},[t("el-card",[e.loading?e._e():t("el-tabs",{attrs:{"tab-position":"left"}},[t("el-tab-pane",{attrs:{label:"基本设置"}},[t("p",{staticStyle:{"padding-left":"20px"}},[e._v("基本设置")]),e._v(" "),t("basic-settings",{attrs:{value:e.loginUser},on:{success:e.getLoginUser}})],1),e._v(" "),t("el-tab-pane",{attrs:{label:"修改密码"}},[t("p",{staticStyle:{"padding-left":"20px"}},[e._v("修改密码")]),e._v(" "),t("password-settings")],1)],1),e._v(" "),t("el-skeleton",{attrs:{loading:e.loading,rows:10,animated:""}})],1)],1)])],1)],1)},o=[],a=(t("96cf"),t("1da1")),n=t("5530"),i=t("2f62"),l=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-row",[t("el-col",{staticStyle:{width:"300px","padding-left":"20px"}},[t("el-form",{ref:"FORM",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"top"}},[t("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[t("el-input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.form.realname,callback:function(s){e.$set(e.form,"realname",s)},expression:"form.realname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话",prop:"phoneNumber"}},[t("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.form.phoneNumber,callback:function(s){e.$set(e.form,"phoneNumber",s)},expression:"form.phoneNumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.form.email,callback:function(s){e.$set(e.form,"email",s)},expression:"form.email"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("更新基本资料")])],1)],1)],1)],1)},c=[],u={name:"BasicSettings",props:{value:{type:Object}},data:function(){return{rules:{phoneNumber:[{required:!0,message:"请输入手机号码",trigger:"blur"}]}}},computed:{form:function(){return this.value}},methods:{onSubmit:function(){var e=this;this.$refs["FORM"].validate((function(s){if(!s)return!1;e.$API.user.updateSelf(e.form).then((function(s){e.$message.success(s.message),e.$emit("success")}))}))}}},d=u,p=t("2877"),f=Object(p["a"])(d,l,c,!1,null,"b588f548",null),w=f.exports,m=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("el-row",[t("el-col",{staticStyle:{"padding-left":"20px"}},[t("el-alert",{attrs:{title:"定期更换密码，更有效的保护您的账号安全",description:"不建议您使用过于简单的密码或容易被猜到的密码，如多个重复或生日：666888、19901002",type:"warning","show-icon":""}})],1)],1),e._v(" "),t("el-row",[t("el-col",{staticStyle:{width:"300px","padding-left":"20px"}},[t("el-form",{ref:"FORM",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"top"}},[t("el-form-item",{attrs:{label:"原始密码",prop:"oldPassword"}},[t("el-input",{attrs:{type:e.oldPasswordShow,"prefix-icon":"el-icon-s-goods",placeholder:"请输入原始密码"},model:{value:e.form.oldPassword,callback:function(s){e.$set(e.form,"oldPassword",s)},expression:"form.oldPassword"}}),e._v(" "),t("span",{staticClass:"show-pwd",on:{click:function(s){return e.showPassword(1)}}},[t("svg-icon",{attrs:{"icon-class":"password"===e.oldPasswordShow?"eye":"eye-open"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"新的密码",prop:"newPassword"}},[t("el-input",{attrs:{type:e.newPasswordShow,"prefix-icon":"el-icon-s-goods",placeholder:"请输入新的密码"},model:{value:e.form.newPassword,callback:function(s){e.$set(e.form,"newPassword",s)},expression:"form.newPassword"}}),e._v(" "),t("span",{staticClass:"show-pwd",on:{click:function(s){return e.showPassword(2)}}},[t("svg-icon",{attrs:{"icon-class":"password"===e.newPasswordShow?"eye":"eye-open"}})],1),e._v(" "),t("p",{staticStyle:{"font-size":"12px",color:"#909399"}},[e._v("提示：密码长度必须在6-20之间，至少包含一个字母和一个数字，不允许连续6个字母或数字字符，不允许空白字符")])],1),e._v(" "),t("el-form-item",{attrs:{label:"重复密码",prop:"repPassword"}},[t("el-input",{attrs:{type:e.repPasswordShow,"prefix-icon":"el-icon-s-goods",placeholder:"请输入确认密码"},model:{value:e.form.repPassword,callback:function(s){e.$set(e.form,"repPassword",s)},expression:"form.repPassword"}}),e._v(" "),t("span",{staticClass:"show-pwd",on:{click:function(s){return e.showPassword(3)}}},[t("svg-icon",{attrs:{"icon-class":"password"===e.repPasswordShow?"eye":"eye-open"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确认修改")])],1)],1)],1)],1)],1)},h=[],g={name:"PasswordSettings",data:function(){return{form:{oldPassword:"",newPassword:"",repPassword:""},rules:{oldPassword:[{required:!0,message:"请输入原始密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新的密码",trigger:"blur"}],repPassword:[{required:!0,message:"请输入确认密码",trigger:"blur"}]},oldPasswordShow:"password",newPasswordShow:"password",repPasswordShow:"password"}},methods:{onSubmit:function(){var e=this;this.$refs["FORM"].validate((function(s){if(s){if(e.form.newPassword!==e.form.repPassword)return e.$message.error("新密码与确认密码不一致");if(e.form.newPassword===e.form.oldPassword)return e.$message.error("新密码与原始密码重复");e.$confirm("变更密码需要重新进行登录，是否继续?","变更提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.$API.user.updatePassword(e.form).then((function(s){e.$message.success(s.message),setTimeout((function(){e.logout()}),3e3)}))})).catch((function(){e.$message({type:"info",message:"已取消变更"})}))}}))},logout:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login?redirect=".concat(this.$route.fullPath));case 3:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),showPassword:function(e){1===e&&("password"===this.oldPasswordShow?this.oldPasswordShow="":this.oldPasswordShow="password"),2===e&&("password"===this.newPasswordShow?this.newPasswordShow="":this.newPasswordShow="password"),3===e&&("password"===this.repPasswordShow?this.repPasswordShow="":this.repPasswordShow="password")}}},v=g,b=(t("29d7"),Object(p["a"])(v,m,h,!1,null,"ee693bc4",null)),P=b.exports,_={name:"UserCenter",components:{BasicSettings:w,PasswordSettings:P},data:function(){return{loading:!1,loginUser:{},userInfo:{}}},computed:Object(n["a"])({},Object(i["b"])(["name"])),created:function(){this.getLoginUser()},methods:{getLoginUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$API.auth.getLoginSelf();case 3:s=e.sent,this.loginUser=s.data,this.userInfo=s.data,this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}()}},y=_,x=(t("a1fd"),Object(p["a"])(y,r,o,!1,null,"d6cb1b96",null));s["default"]=x.exports},cdc9:function(e,s,t){}}]);