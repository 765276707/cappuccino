(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97a0dc24"],{"0c62":function(e,t,i){"use strict";i("319b")},"319b":function(e,t,i){},"4897e":function(e,t,i){"use strict";i("dd61")},"7d19":function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"code-editor"}},[i("codemirror",{attrs:{options:e.editorOptions},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}})],1)},n=[],l=i("8f94");i("a7be"),i("d2e8"),i("f4ba");i("dc5b"),i("ced0");var a={name:"CodeMirror",props:{value:{type:String},mode:{type:String},readOnly:{type:Boolean,default:!1}},components:{codemirror:l["codemirror"]},data:function(){return{editorOptions:{autoRefresh:!0,tabSize:4,mode:this.mode,theme:"material",lineNumbers:!0,line:!0,readOnly:this.readOnly}}},computed:{selectValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},o=a,r=(i("0c62"),i("2877")),c=Object(r["a"])(o,s,n,!1,null,null,null);t["a"]=c.exports},dd61:function(e,t,i){},eb43:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",[i("el-aside",{attrs:{width:"300px"}},[i("el-card",{attrs:{shadow:"always"}},[e.loading?e._e():i("el-descriptions",{staticClass:"margin-top",attrs:{title:"客户端详情",column:1,size:"medium"}},[i("template",{slot:"extra"},[i("el-button",{attrs:{type:"info",icon:"el-icon-arrow-left",size:"small",round:""},on:{click:function(t){return e.backClientPage()}}},[e._v("返回")])],1),e._v(" "),i("el-descriptions-item",{attrs:{label:"客户端名"}},[e._v(e._s(e.client.clientName))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"所属环境"}},[e._v(e._s(e.client.envName))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"所属分组"}},[e._v(e._s(e.client.groupName))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"描述"}},[e._v(e._s(e.client.clientDesc))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"负责人"}},[e._v(e._s(e.client.charger))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"负责人电话"}},[e._v(e._s(e.client.chargerPhoneNumber))])],2),e._v(" "),i("el-skeleton",{attrs:{loading:e.loading,rows:6,animated:""}})],1),e._v(" "),i("el-card",{attrs:{shadow:"always","body-style":"padding-left: 10px;"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v("最近操作")]),e._v(" "),i("span",{staticStyle:{float:"right",padding:"3px 0","font-size":"12px",color:"#E6A23C"}},[e._v("只保留最近3个月内操作记录")])]),e._v(" "),e.loading?e._e():i("div",[e.logs.length?i("el-timeline",{staticStyle:{"padding-left":"0px"},attrs:{reverse:e.reverse}},e._l(e.logs,(function(t){return i("el-timeline-item",{key:t.id,attrs:{color:t.color,timestamp:t.opTime}},[i("span",{staticStyle:{"font-size":"13px",color:"#33CCCC"}},[e._v(e._s(t.opUser))]),e._v(" "),i("span",{staticStyle:{"font-size":"13px"}},[e._v(e._s(t.opDesc))])])})),1):i("el-empty",{attrs:{description:"该客户端最近没有操作记录","image-size":"115"}})],1),e._v(" "),i("el-skeleton",{attrs:{loading:e.loading,rows:8,animated:""}})],1)],1),e._v(" "),i("el-container",[i("el-header",{staticClass:"topbar"},[e.loading?e._e():i("div",{staticClass:"left-panel"},[i("span",[e._v("主配置："),e.hasConfig?i("span",{staticStyle:{color:"#67C23A"}},[e._v("已配置")]):i("span",{staticStyle:{color:"#E6A23C"}},[e._v("无")])]),e._v(" "),i("span",{staticStyle:{"margin-left":"80px"}},[e._v("灰度配置："),e.hasGrayscaleConfig?i("span",{staticStyle:{color:"#67C23A"}},[e._v("已配置")]):i("span",{staticStyle:{color:"#E6A23C"}},[e._v("无")])])]),e._v(" "),i("el-skeleton",{attrs:{loading:e.loading,animated:""}})],1),e._v(" "),i("el-main",[i("el-tabs",{staticStyle:{"min-height":"580px"},attrs:{type:"border-card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{name:"master"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" 主配置")]),e._v(" "),e.loading?e._e():i("div",[e.hasConfig?i("div",[i("el-descriptions",{attrs:{title:"",column:2,size:"large",direction:"horizontal"}},[i("template",{slot:"extra"},[i("el-button",{attrs:{type:"success",icon:"el-icon-guide",size:"small"},on:{click:function(t){return e.monitor()}}},[e._v("监听实例")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(t){return e.update()}}},[e._v("发布新版本")]),e._v(" "),i("el-button",{attrs:{type:"info",icon:"el-icon-price-tag",size:"small",plain:""},on:{click:function(t){return e.grayscale()}}},[e._v("创建灰度")]),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.deleteById()}}},[e._v("删除")])],1),e._v(" "),i("el-descriptions-item",{attrs:{label:"发布状态","label-class-name":"label"}},[i("el-tag",{attrs:{size:"small",type:"success"}},[e._v("已发布")])],1),e._v(" "),i("el-descriptions-item",{attrs:{label:"配置描述","label-class-name":"label"}},[e._v(e._s(null==e.config.description?"-":e.config.description))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"版本号","label-class-name":"label"}},[i("el-tag",{attrs:{size:"mini",effect:"plain"}},[e._v(e._s(null==e.config.version?"-":e.config.version))])],1),e._v(" "),i("el-descriptions-item",{attrs:{label:"格式","label-class-name":"label"}},[e._v(e._s(e.config.fileExtension))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"MD5","label-class-name":"label"}},[e._v(e._s(null==e.config.sign?"-":e.config.sign))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"创建时间","label-class-name":"label"}},[e._v(e._s(e.config.createTime))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"发布时间","label-class-name":"label"}},[e._v(e._s(null==e.config.releaseTime?"-":e.config.releaseTime))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"发布人","label-class-name":"label"}},[e._v(e._s(null==e.config.releaseUser?"-":e.config.releaseUser))])],2),e._v(" "),i("code-mirror",{attrs:{mode:e.config.fileExtension,readOnly:!0},model:{value:e.config.content,callback:function(t){e.$set(e.config,"content",t)},expression:"config.content"}})],1):i("el-empty",{attrs:{description:"当前客户端尚未有任何主配置"}},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.save()}}},[e._v("发布新的配置")]),e._v(" "),i("el-button",{attrs:{type:"warning",icon:"el-icon-collection-tag",size:"small"},on:{click:function(t){return e.history()}}},[e._v("从历史版本中回滚")])],1)],1),e._v(" "),i("el-skeleton",{attrs:{loading:e.loading,rows:16,animated:""}})],1),e._v(" "),i("el-tab-pane",{attrs:{name:"grayscale"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"el-icon-files"}),e._v(" 灰度配置")]),e._v(" "),e.hasGrayscaleConfig?i("div",[i("el-descriptions",{attrs:{title:"",column:2,size:"large",direction:"horizontal"}},[i("template",{slot:"extra"},[i("el-button",{attrs:{type:"success",icon:"el-icon-guide",size:"small"},on:{click:function(t){return e.monitorGrayscale()}}},[e._v("灰度监听实例")]),e._v(" "),i("el-button",{attrs:{type:"warning",icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.releaseGrayscale()}}},[e._v("灰度发布")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.releaseFull()}}},[e._v("全量发布")]),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.cancelGrayscale()}}},[e._v("取消灰度")])],1),e._v(" "),i("el-descriptions-item",{attrs:{label:"发布状态","label-class-name":"label"}},[i("el-tag",{attrs:{size:"small",type:"success"}},[e._v("已发布")])],1),e._v(" "),i("el-descriptions-item",{attrs:{label:"格式","label-class-name":"label"}},[e._v(e._s(e.grayscaleConfig.fileExtension))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"主线版本号","label-class-name":"label"}},[i("el-tag",{attrs:{size:"mini",effect:"plain"}},[e._v(e._s(null==e.grayscaleConfig.version?"-":e.grayscaleConfig.version))])],1),e._v(" "),i("el-descriptions-item",{attrs:{label:"配置描述","label-class-name":"label"}},[e._v(e._s(null==e.grayscaleConfig.description?"-":e.grayscaleConfig.description))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"MD5","label-class-name":"label"}},[e._v(e._s(null==e.grayscaleConfig.sign?"-":e.grayscaleConfig.sign))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"创建时间","label-class-name":"label"}},[e._v(e._s(e.grayscaleConfig.createTime))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"发布时间","label-class-name":"label"}},[e._v(e._s(e.grayscaleConfig.releaseTime))]),e._v(" "),i("el-descriptions-item",{attrs:{label:"灰度规则","label-class-name":"label"}},[e._v("\n                              "+e._s(e.grayscaleConfig.rules)+"\n                          ")])],2),e._v(" "),i("code-mirror",{attrs:{mode:e.grayscaleConfig.fileExtension,readOnly:!0},model:{value:e.grayscaleConfig.content,callback:function(t){e.$set(e.grayscaleConfig,"content",t)},expression:"grayscaleConfig.content"}})],1):i("el-empty",{attrs:{description:"当前尚未创建任何灰度配置，您可前往主配置中创建灰度"}},[i("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.save()}}},[e._v("发布新的灰度配置")])],1)],1)],1),e._v(" "),i("save-update",{ref:"SaveUpdate",on:{success:function(t){return e.success()}}}),e._v(" "),i("grayscale-update",{ref:"GrayscaleUpdate",on:{success:function(t){return e.success()}}}),e._v(" "),i("monitor-instances",{ref:"MonitorInstances"})],1)],1)],1)},n=[],l=(i("96cf"),i("1da1")),a=i("7d19"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.visible?i("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"800px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,fullscreen:!0,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"FORM",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[i("el-row",[i("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"id"}},[i("el-input",{model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"clientId"}},[i("el-input",{model:{value:e.form.clientId,callback:function(t){e.$set(e.form,"clientId",t)},expression:"form.clientId"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"配置描述",prop:"description"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:3,placeholder:"请输入配置描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"格式",prop:"fileExtension"}},[i("el-radio-group",{attrs:{disabled:e.fileExtensionDisabled},model:{value:e.form.fileExtension,callback:function(t){e.$set(e.form,"fileExtension",t)},expression:"form.fileExtension"}},[i("el-radio",{attrs:{label:"properties"}},[e._v("properties")]),e._v(" "),i("el-radio",{attrs:{label:"yaml"}},[e._v("yaml")])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"配置内容",prop:"content"}},[i("code-mirror",{key:e.codeMirrorMode,attrs:{mode:e.codeMirrorMode},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确认发布")]),e._v(" "),i("el-button",{on:{click:function(t){return e.close()}}},[e._v("取消发布")])],1)],1):e._e()},r=[],c={components:{CodeMirror:a["a"]},data:function(){return{title:"",visible:!1,fileExtensionDisabled:!1,form:{},rule:{},loading:!1}},computed:{codeMirrorMode:function(){return this.form.fileExtension}},methods:{submit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.valid("FORM")){e.next=2;break}return e.abrupt("return");case 2:if(null,this.form.id){e.next=9;break}return e.next=6,this.$API.config.save(this.form);case 6:e.sent,e.next=12;break;case 9:return e.next=11,this.$API.config.update(this.form);case 11:e.sent;case 12:this.$emit("success",this.form.id),this.$message.success("发布成功"),this.close();case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valid:function(e){var t=!1;return this.$refs[e].validate((function(e){e&&(t=e)})),t},open:function(e){this.visible=!0,e.id?(this.title="编辑配置",this.fileExtensionDisabled=!0,this.form=Object.assign({clientId:e.clientId},e)):(this.title="新增配置",this.fileExtensionDisabled=!1,this.form=Object.assign({clientId:e.clientId,fileExtension:"properties"},e))},close:function(){this.$refs["FORM"].resetFields(),this.$refs["FORM"].clearValidate(),this.visible=!1}}},u=c,f=i("2877"),d=Object(f["a"])(u,o,r,!1,null,null,null),m=d.exports,p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.visible?i("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"800px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,fullscreen:!0,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[i("el-form",{ref:"FORM",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[i("el-row",[i("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"id"}},[i("el-input",{model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:24}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"clientId"}},[i("el-input",{model:{value:e.form.clientId,callback:function(t){e.$set(e.form,"clientId",t)},expression:"form.clientId"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"配置描述",prop:"description"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:3,placeholder:"请输入配置描述"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"灰度规则",prop:"rules"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:5,placeholder:"请输入灰度规则，多个规则用英文字符逗号隔开"},model:{value:e.form.rules,callback:function(t){e.$set(e.form,"rules",t)},expression:"form.rules"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"格式",prop:"fileExtension"}},[i("el-radio-group",{attrs:{disabled:e.fileExtensionDisabled},model:{value:e.form.fileExtension,callback:function(t){e.$set(e.form,"fileExtension",t)},expression:"form.fileExtension"}},[i("el-radio",{attrs:{label:"properties"}},[e._v("properties")]),e._v(" "),i("el-radio",{attrs:{label:"yaml"}},[e._v("yaml")])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"配置内容",prop:"content"}},[i("code-mirror",{key:e.codeMirrorMode,attrs:{mode:e.codeMirrorMode},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确定发布")]),e._v(" "),i("el-button",{on:{click:function(t){return e.close()}}},[e._v("取消发布")])],1)],1):e._e()},v=[],g={components:{CodeMirror:a["a"]},data:function(){return{title:"",visible:!1,fileExtensionDisabled:!1,form:{},rule:{},loading:!1}},computed:{codeMirrorMode:function(){return this.form.fileExtension}},methods:{submit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.valid("FORM")){e.next=2;break}return e.abrupt("return");case 2:return t=null,e.next=5,this.$API.grayscale.release(this.form);case 5:t=e.sent,this.$emit("success"),this.$message.success(t.message),this.close();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valid:function(e){var t=!1;return this.$refs[e].validate((function(e){e&&(t=e)})),t},open:function(e){this.visible=!0,this.title="编辑灰度配置",this.form=Object.assign({},e)},close:function(){this.$refs["FORM"].resetFields(),this.$refs["FORM"].clearValidate(),this.visible=!1}}},h=g,b=Object(f["a"])(h,p,v,!1,null,null,null),_=b.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.visible?i("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[e.instances.length?i("div",e._l(e.instances,(function(t){return i("el-card",{key:t,attrs:{"body-style":"padding: 10px; background-color: #FFEFD5; color: #409EFF;"}},[i("i",{staticClass:"el-icon-monitor"}),e._v(" "+e._s(t)+" "),i("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("正在监听")])],1)})),1):i("el-empty",{attrs:{description:"暂无监听的实例","image-size":100}}),e._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.close()}}},[e._v("关 闭")])],1)],1):e._e()],1)},x=[],w={data:function(){return{title:"",visible:!1,loading:!1,clientId:null,instanceType:null,instances:[],timer:null}},beforeDestroy:function(){clearInterval(this.timer)},methods:{getList:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,"GRAYSCALE"!==this.instanceType){e.next=7;break}return e.next=4,this.$API.monitor.getGrayscaleInstances(this.clientId);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,this.$API.monitor.getInstances(this.clientId);case 9:t=e.sent;case 10:this.instances=t.data,this.loading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),open:function(e,t){this.visible=!0,this.title="监听实例",this.clientId=e,this.instanceType=t,this.getList(),this.timer=setInterval(this.getList,5e3)},close:function(){this.visible=!1,clearInterval(this.timer)}}},$=w,k=Object(f["a"])($,y,x,!1,null,null,null),C=k.exports,I={components:{CodeMirror:a["a"],SaveUpdate:m,GrayscaleUpdate:_,MonitorInstances:C},data:function(){return{loading:!1,radio:1,hasConfig:!1,hasGrayscaleConfig:!1,client:{},config:{},grayscaleConfig:{},logs:[],activeName:"master"}},created:function(){this.getByClientId()},methods:{getByClientId:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t=this.$route.query.clientId,e.next=4,this.$API.client.getConfigInfo(t);case 4:i=e.sent,s=i.data,this.client=s.client,null!=s.config?this.hasConfig=!0:this.hasConfig=!1,null!=s.grayscale?this.hasGrayscaleConfig=!0:this.hasGrayscaleConfig=!1,this.config=s.config,this.grayscaleConfig=s.grayscale,this.logs=s.auditlogs,this.loading=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=this,t=this.$route.query.clientId;this.$nextTick((function(){e.$refs.SaveUpdate.open({clientId:t})}))},update:function(){var e=this;this.$nextTick((function(){e.$refs.SaveUpdate.open(e.config)}))},success:function(e){this.getByClientId()},deleteById:function(){var e=this;this.$confirm("确认删除主线配置?","危险操作",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.$API.config.deleteById(e.config.id).then((function(t){e.getByClientId(),e.$message.success(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))},release:function(){var e=this;this.$confirm("是否将配置发布?","操作提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.$API.config.release(e.config.id).then((function(t){e.getByClientId(),e.$message.success(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消发布"})}))},grayscale:function(){var e=this;this.$confirm("是否为该主配置发布一个灰度配置?","操作提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.$nextTick((function(){e.$refs.GrayscaleUpdate.open({id:null,clientId:e.config.clientId,description:e.config.description,rules:null,fileExtension:e.config.fileExtension,content:e.config.content,configVersion:e.config.version})}))})).catch((function(){e.$message({type:"info",message:"已取消创建"})}))},backClientPage:function(){this.$router.back(-1)},updateGrayscale:function(){var e=this;this.$nextTick((function(){e.$refs.GrayscaleUpdate.open(e.grayscaleConfig)}))},releaseGrayscale:function(){var e=this;this.$nextTick((function(){e.$refs.GrayscaleUpdate.open(e.grayscaleConfig)}))},releaseFull:function(){var e=this;this.$confirm("全量发布将会把灰度配置内容合并到主线配置中，并移除灰度配置，是否继续?","操作提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.$API.grayscale.releaseFull(e.grayscaleConfig.id).then((function(t){e.getByClientId(),e.activeName="master",e.$message.success(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消全量发布"})}))},cancelGrayscale:function(){var e=this;this.$confirm("取消灰度将会把灰度配置移除，是否继续?","操作提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){e.$API.grayscale.deleteById(e.grayscaleConfig.id).then((function(t){e.getByClientId(),e.activeName="master",e.$message.success(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消操作"})}))},monitor:function(){var e=this,t=this.$route.query.clientId;this.$nextTick((function(){e.$refs.MonitorInstances.open(t,"MASTER")}))},monitorGrayscale:function(){var e=this,t=this.$route.query.clientId;this.$nextTick((function(){e.$refs.MonitorInstances.open(t,"GRAYSCALE")}))}}},E=I,M=(i("4897e"),Object(f["a"])(E,s,n,!1,null,"5f4d2831",null));t["default"]=M.exports}}]);