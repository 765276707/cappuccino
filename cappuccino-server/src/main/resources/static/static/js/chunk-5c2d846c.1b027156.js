(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c2d846c"],{"02f4":function(e,t,n){var r=n("4588"),i=n("be13");e.exports=function(e){return function(t,n){var o,l,a=String(i(t)),s=r(n),c=a.length;return s<0||s>=c?e?"":void 0:(o=a.charCodeAt(s),o<55296||o>56319||s+1===c||(l=a.charCodeAt(s+1))<56320||l>57343?e?a.charAt(s):o:e?a.slice(s,s+2):l-56320+(o-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var r=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"1afa":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",e._g({attrs:{filterable:e.filterable,clearable:e.clearable,placeholder:e.placeholder,multiple:e.multiple},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e.$listeners),e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)},i=[],o=(n("96cf"),n("1da1")),l=(n("c5f6"),{name:"EnvSelect",props:{value:{type:Number},type:{type:String},excludeId:{type:Number,default:null},placeholder:{type:String,default:""},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{options:[]}},computed:{selectValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.getEnvironmentList()},methods:{getEnvironmentList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$API.environment.getList(this.excludeId);case 2:t=e.sent,this.options=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),a=l,s=n("2877"),c=Object(s["a"])(a,r,i,!1,null,null,null);t["a"]=c.exports},"214f":function(e,t,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),o=n("79e5"),l=n("be13"),a=n("2b4c"),s=n("520a"),c=a("species"),u=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),p=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=a(e),f=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),h=f?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[c]=function(){return n}),n[d](""),!t})):void 0;if(!f||!h||"replace"===e&&!u||"split"===e&&!p){var m=/./[d],v=n(l,d,""[e],(function(e,t,n,r,i){return t.exec===s?f&&!i?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),g=v[0],b=v[1];r(String.prototype,e,g),i(RegExp.prototype,d,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},2400:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticStyle:{"background-color":"#F2F6FC",margin:"10px",height:"60px","border-radius":"5px","padding-top":"15px"},attrs:{height:"80px"}},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"客户端环境"}},[n("el-radio-group",{staticClass:"cc-radio-button",attrs:{size:"mini"},on:{change:function(t){return e.envChange()}},model:{value:e.searchForm.envId,callback:function(t){e.$set(e.searchForm,"envId",t)},expression:"searchForm.envId"}},[n("el-radio-button",{attrs:{label:"1"}},[e._v("PUBLIC (公共环境)")]),e._v(" "),n("el-radio-button",{attrs:{label:"2"}},[e._v("PRODUCTION (生产环境)")]),e._v(" "),n("el-radio-button",{attrs:{label:"3"}},[e._v("DEVELOPMENT (开发环境)")]),e._v(" "),n("el-radio-button",{attrs:{label:"4"}},[e._v("TESTS (测试环境)")])],1)],1),e._v(" "),n("el-form-item",[n("el-tag",{attrs:{type:"warning",size:"medium"}},[e._v("* 各个环境之间相互隔离")])],1)],1)],1),e._v(" "),n("el-container",[n("el-aside",{staticClass:"tree-box",staticStyle:{"padding-left":"10px","padding-right":"5px"},attrs:{width:"250px"}},[n("el-card",{attrs:{shadow:"always","body-style":"padding: 0px; min-height: 300px; max-height: 600px;"}},[n("div",{staticStyle:{height:"45px","line-height":"45px","background-color":"#F2F6FC"}},[n("span",{staticStyle:{"margin-left":"10px","font-szie":"16px",color:"#606266"}},[n("b",[e._v("分组")])])]),e._v(" "),n("el-input",{attrs:{placeholder:"请输入分组关键字过滤",clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),n("el-tree",{ref:"Tree",attrs:{data:e.groups,"highlight-current":!0,"node-key":"value","filter-node-method":e.filterNode,"current-node-key":e.searchForm.groupId},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),n("el-main",{staticStyle:{"padding-left":"5px","padding-right":"10px"}},[n("el-card",{attrs:{shadow:"always","body-style":"padding: 0px; min-height: 500px;"}},[n("el-container",[n("el-header",{staticClass:"topbar"},[n("div",{staticClass:"left-panel"},[n("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.save}},[e._v("添加")]),e._v(" "),n("el-button",{staticStyle:{"background-color":"#9400D3",color:"#fff"},attrs:{icon:"el-icon-document-copy"},on:{click:e.cloneMany}},[e._v("克隆")]),e._v(" "),n("el-button",{staticStyle:{"background-color":"#00CED1",color:"#fff"},attrs:{icon:"el-icon-upload2"},on:{click:e.imports}},[e._v("导入")]),e._v(" "),n("el-button",{staticStyle:{"background-color":"#00CED1",color:"#fff"},attrs:{icon:"el-icon-download"},on:{click:e.exports}},[e._v("导出")]),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"}},[e._v("删除")])],1),e._v(" "),n("div",{staticClass:"right-panel"},[n("div",{staticClass:"right-panel-search"},[n("el-input",{attrs:{placeholder:"编号/名称/类型"},model:{value:e.searchForm.searchText,callback:function(t){e.$set(e.searchForm,"searchText",t)},expression:"searchForm.searchText"}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getPage}}),e._v(" "),n("el-button",{attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:e.refresh}}),e._v(" "),n("el-popover",{attrs:{width:"60",trigger:"click"}},[n("el-checkbox-group",{model:{value:e.columnSelecteds,callback:function(t){e.columnSelecteds=t},expression:"columnSelecteds"}},e._l(e.columnHeaders,(function(t){return n("el-checkbox",{key:t.prop,attrs:{label:t.prop}},[e._v(e._s(t.label))])})),1),e._v(" "),n("el-button",{attrs:{slot:"reference",icon:"el-icon-s-grid"},slot:"reference"})],1)],1)])]),e._v(" "),n("el-main",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","min-height":"450px"},attrs:{data:e.pageResult.list,"element-loading-text":"加载数据中","header-row-style":{height:"45px"},"header-cell-style":{background:"#F2F6FC"},"row-style":{height:"60px"}},on:{"selection-change":e.handleSelectedChange},scopedSlots:e._u([{key:"empty",fn:function(){return[n("el-empty",{attrs:{description:"暂无数据","image-size":100}})]},proxy:!0}])},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"编号",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{prop:"clientName",label:"客户端名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"clientDesc",label:"客户端描述"}}),e._v(" "),e.columnHeaders[0].isShow?n("el-table-column",{attrs:{prop:e.columnHeaders[0].prop,label:e.columnHeaders[0].label}}):e._e(),e._v(" "),e.columnHeaders[1].isShow?n("el-table-column",{attrs:{prop:e.columnHeaders[1].prop,label:e.columnHeaders[1].label}}):e._e(),e._v(" "),n("el-table-column",{attrs:{prop:"charger",label:"负责人"}}),e._v(" "),n("el-table-column",{attrs:{prop:"chargerPhoneNumber",label:"负责人电话"}}),e._v(" "),e.columnHeaders[2].isShow?n("el-table-column",{attrs:{prop:e.columnHeaders[2].prop,label:e.columnHeaders[2].label}}):e._e(),e._v(" "),e.columnHeaders[3].isShow?n("el-table-column",{attrs:{prop:e.columnHeaders[3].prop,label:e.columnHeaders[3].label}}):e._e(),e._v(" "),e.columnHeaders[4].isShow?n("el-table-column",{attrs:{prop:e.columnHeaders[4].prop,label:e.columnHeaders[4].label}}):e._e(),e._v(" "),e.columnHeaders[5].isShow?n("el-table-column",{attrs:{prop:e.columnHeaders[5].prop,label:e.columnHeaders[5].label}}):e._e(),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{color:"#00CED1"},attrs:{type:"text",icon:"el-icon-tickets"},on:{click:function(n){return e.config(t.$index,t.row)}}},[e._v("管理配置")]),e._v(" "),n("el-button",{staticStyle:{color:"#9400D3"},attrs:{type:"text",icon:"el-icon-document-copy"},on:{click:function(n){return e.clone(t.$index,t.row)}}},[e._v("克隆")]),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["SA"],expression:"['SA']"}],staticStyle:{color:"#E6A23C"},attrs:{type:"text",icon:"el-icon-finished"},on:{click:function(n){return e.assign(t.$index,t.row)}}},[e._v("授权")]),e._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(n){return e.update(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){return e.deleteInRow(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("pagination",{attrs:{total:e.pageResult.total},on:{"page-change":e.pageChange}})],1),e._v(" "),n("save-update",{ref:"SaveUpdate",on:{success:e.getPage}}),e._v(" "),n("assign",{ref:"Assign"}),e._v(" "),n("clone",{ref:"Clone"})],1)],1)],1)],1),e._v(" "),n("import",{attrs:{visible:e.importParam.visible},on:{"import-complete":function(t){return e.importComplete()}}})],1)},i=[],o=(n("96cf"),n("1da1")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"FORM",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[n("el-row",[n("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:24}},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"id"}},[n("el-input",{model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"客户端名称",prop:"clientName"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入客户端名称"},model:{value:e.form.clientName,callback:function(t){e.$set(e.form,"clientName",t)},expression:"form.clientName"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"所属环境",prop:"envId"}},[n("env-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择环境"},model:{value:e.form.envId,callback:function(t){e.$set(e.form,"envId",t)},expression:"form.envId"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"所属分组",prop:"groupId"}},[n("group-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择分组"},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"负责人",prop:"charger"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入负责人姓名"},model:{value:e.form.charger,callback:function(t){e.$set(e.form,"charger",t)},expression:"form.charger"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"负责人电话",prop:"chargerPhoneNumber"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入负责人电话"},model:{value:e.form.chargerPhoneNumber,callback:function(t){e.$set(e.form,"chargerPhoneNumber",t)},expression:"form.chargerPhoneNumber"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"客户端描述",prop:"clientDesc"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:3,placeholder:"请输入客户端描述"},model:{value:e.form.clientDesc,callback:function(t){e.$set(e.form,"clientDesc",t)},expression:"form.clientDesc"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){return e.close()}}},[e._v("关 闭")])],1)],1):e._e()},a=[],s=n("1afa"),c=n("599d"),u={components:{EnvSelect:s["a"],GroupSelect:c["a"]},data:function(){return{title:"",visible:!1,form:{},rule:{clientName:[{required:!0,message:"请输入客户端名称",trigger:"blur"}],envId:[{required:!0,message:"请选择一个环境",trigger:"change"}],groupId:[{required:!0,message:"请选择一个分组",trigger:"change"}]},loading:!1}},methods:{submit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.valid("FORM")){e.next=2;break}return e.abrupt("return");case 2:if(t=null,this.form.id){e.next=9;break}return e.next=6,this.$API.client.save(this.form);case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,this.$API.client.update(this.form);case 11:t=e.sent;case 12:this.$emit("success",this.form.id),this.$message.success(t.message),this.close();case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valid:function(e){var t=!1;return this.$refs[e].validate((function(e){e&&(t=e)})),t},open:function(e){this.visible=!0,e.id?this.title="编辑客户端":this.title="新增客户端",this.form=Object.assign({},e)},close:function(){this.$refs["FORM"].resetFields(),this.$refs["FORM"].clearValidate(),this.visible=!1}}},p=u,d=n("2877"),f=Object(d["a"])(p,l,a,!1,null,null,null),h=f.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"FORM",attrs:{"label-width":"120px"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"允许读写",prop:"userIds"}},[n("el-checkbox-group",{model:{value:e.userIds,callback:function(t){e.userIds=t},expression:"userIds"}},e._l(e.options,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){return e.close()}}},[e._v("关 闭")])],1)],1):e._e()},v=[],g={components:{},data:function(){return{title:"",visible:!1,clientId:null,userIds:[],options:[],loading:!1}},beforeDestroy:function(){},methods:{getRelations:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$API.relation.getRelations(this.clientId);case 2:t=e.sent,this.userIds=t.data.userIds,this.options=t.data.options;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={resourceId:this.clientId,resourceType:"c",userIds:this.userIds},e.next=3,this.$API.relation.assign(t);case 3:n=e.sent,this.$message.success(n.message),this.close();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valid:function(e){var t=!1;return this.$refs[e].validate((function(e){e&&(t=e)})),t},open:function(e){this.visible=!0,this.title="授权",this.clientId=e.id,this.getRelations()},close:function(){this.$refs["FORM"].resetFields(),this.$refs["FORM"].clearValidate(),this.visible=!1}}},b=g,x=Object(d["a"])(b,m,v,!1,null,null,null),w=x.exports,_=n("65e1"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"FORM",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"克隆的客户端",prop:"clientName"}},e._l(e.clientDetails,(function(t){return n("div",{key:t.clientName},[n("el-tag",{attrs:{type:"info",size:"mini"}},[e._v(" "+e._s(t.clientName)+" ")])],1)})),0)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"目标环境",prop:"envId"}},[n("env-select",{staticStyle:{width:"100%"},attrs:{excludeId:e.excludeEnvId,placeholder:"请选择要拷贝的目标环境"},model:{value:e.form.envId,callback:function(t){e.$set(e.form,"envId",t)},expression:"form.envId"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"目标分组",prop:"groupId"}},[n("group-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择要拷贝的目标分组"},model:{value:e.form.groupId,callback:function(t){e.$set(e.form,"groupId",t)},expression:"form.groupId"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"同步配置",prop:"withConfig"}},[n("el-checkbox",{model:{value:e.form.withConfig,callback:function(t){e.$set(e.form,"withConfig",t)},expression:"form.withConfig"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确 定")]),e._v(" "),n("el-button",{on:{click:function(t){return e.close()}}},[e._v("关 闭")])],1)],1):e._e()},S=[],k={components:{EnvSelect:s["a"],GroupSelect:c["a"]},data:function(){return{title:"",visible:!1,excludeEnvId:null,clientDetails:[],form:{clientIds:[],envId:null,groupId:null,withConfig:!0},rule:{},loading:!1}},watch:function(){},methods:{submit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.valid("FORM")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$API.client.clone(this.form);case 4:t=e.sent,this.$emit("success",this.form.id),this.$message.success(t.message),this.close();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valid:function(e){var t=!1;return this.$refs[e].validate((function(e){e&&(t=e)})),t},open:function(e){this.visible=!0,this.title="克隆客户端",this.form.clientIds=e.map((function(e,t){return e.id})),this.clientDetails=e.map((function(e,t){return{clientId:e.id,clientName:e.clientName,envId:e.envId,cloneable:null}})),this.excludeEnvId=e[0].envId},close:function(){this.clientNames=[],this.form.clientIds=[],this.form.envId=null,this.form.cloneConfig=!0,this.$refs["FORM"].resetFields(),this.$refs["FORM"].clearValidate(),this.visible=!1}}},$=k,I=Object(d["a"])($,y,S,!1,null,null,null),R=I.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("file-import",{attrs:{title:"导入客户端",visible:e.visible,action:e.action,accept:e.accept},on:{"import-complete":e.importComplete}},[n("div",{staticStyle:{"margin-top":"10px"}},[n("div",[e._v("文件格式："),n("span",{staticStyle:{color:"#F56C6C"}},[e._v(" "+e._s(e.accept)+" ")])]),e._v(" "),n("el-tag",{attrs:{type:"warning"}},[e._v("提示")]),e._v(" 建议使用导出的JSON文件上传，导入数据的时会生成新编号的客户端，文件内容必须符合要求。\n        ")],1)])],1)},F=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[n("el-upload",{ref:"upload",attrs:{headers:e.headers,action:e.action,"on-success":e.onSuccess,"on-error":e.onError,"on-remove":e.onRemove,"on-change":e.onChange,accept:e.accept,multiple:"",limit:1,"auto-upload":!1}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-folder-opened",plain:""}},[e._v("选择文件")])],1),e._v(" "),e._t("default"),e._v(" "),e.loading?n("div",{staticClass:"import-result"},[n("i",{staticClass:"el-icon-loading"}),e._v(" "),n("span",{staticStyle:{color:"#909399"}},[e._v("正在导入中，请稍候......")])]):e._e(),e._v(" "),e.showResult?n("div",{staticClass:"import-result"},[e.result.success?n("p",{staticStyle:{color:"#67C23A"}},[e._v(e._s(e.result.message))]):n("p",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.result.message))])]):e._e(),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"success",disabled:e.submitDisabled},on:{click:e.submitUpload}},[n("i",{staticClass:"el-icon-upload el-icon--left"}),e._v("上传并导入")]),e._v(" "),n("el-button",{on:{click:e.closeDialog}},[e._v("关 闭")])],1)],2)},O=[],N=(n("6b54"),n("a481"),n("35c9"));function P(){var e={Authorization:Object(N["a"])()};return e}var T={name:"ElFileImport",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"导入数据"},action:{type:String,default:""},accept:{type:String,default:".json"}},data:function(){return{submitDisabled:!0,showResult:!1,loading:!1,countdown:0,result:{success:!1,message:null,total:0}}},computed:{headers:function(){return P()}},beforeDestroy:function(){this.timer||clearInterval(this.timer)},methods:{onSuccess:function(e,t,n){this.result.message=e.message,this.result.success=e.success,e.success&&(this.result.total=e.data.total),this.showResult=!0,this.loading=!1},onError:function(e,t,n){var r=JSON.parse(e.toString().replace("Error:",""));this.loading=!1,this.$message.error(r.errorMessage)},onChange:function(e,t){"success"==e.status?this.submitDisabled=!0:this.submitDisabled=!(t.length>0)},onRemove:function(e,t){this.submitDisabled=!(t.length>0),this.result=Object.assign({},initResult),this.showResult=!1},submitUpload:function(){this.loading=!0,this.$refs.upload.submit()},closeDialog:function(){this.result={},this.showResult=!1,this.loading=!1,this.submitDisabled=!0,this.$refs.upload.clearFiles(),this.$emit("import-complete")}}},A=T,D=(n("7865"),Object(d["a"])(A,E,O,!1,null,"4efe0b42",null)),j=D.exports,H={name:"Import",components:{FileImport:j},props:{visible:{type:Boolean,default:!1}},data:function(){return{accept:".json"}},computed:{action:function(){return this.$API.client.imports()}},methods:{importComplete:function(){this.$emit("import-complete")}}},M=H,B=Object(d["a"])(M,C,F,!1,null,null,null),L=B.exports,V={directives:{permission:_["a"]},data:function(){return{searchForm:{searchText:"",envId:1,groupId:1},filterText:"",pageResult:{total:0,pageNum:1,pageSize:10,list:[]},loading:!1,env:"PUBLIC",groups:[],currentSelectedRows:[],columnHeaders:[{index:0,prop:"envName",label:"所属环境",isShow:!1},{index:1,prop:"groupName",label:"所属分组",isShow:!1},{index:2,prop:"createTime",label:"创建时间",isShow:!0},{index:3,prop:"createUser",label:"创建者",isShow:!0},{index:4,prop:"updateTime",label:"更新时间",isShow:!1},{index:5,prop:"updateUser",label:"更新者",isShow:!1}],columnSelecteds:["createTime","createUser"],importParam:{visible:!1}}},components:{SaveUpdate:h,Assign:w,Clone:R,Import:L},mounted:function(){this.getGroupList(),this.getPage()},watch:{filterText:function(e){this.$refs.Tree.filter(e)},columnSelecteds:function(e){var t=this,n=this.columnHeaders.filter((function(t){return-1==e.indexOf(t.prop)})).map((function(e){return e.prop}));this.columnHeaders.filter((function(e){var r=-1!=n.indexOf(e.prop);r?(e.isShow=!1,t.$nextTick((function(){t.$refs.Table.doLayout()}))):(e.isShow=!0,t.$nextTick((function(){t.$refs.Table.doLayout()})))}))}},methods:{getPage:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.$API.client.getPage(this.searchForm);case 4:t=e.sent,this.pageResult=t.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.loading=!1;case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),getGroupList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$API.group.getList();case 2:t=e.sent,this.groups=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refresh:function(){this.searchText="",this.getPage()},pageChange:function(e,t){this.searchForm.pageNum=e,this.searchForm.pageSize=t,this.getPage()},handleSelectedChange:function(e){this.currentSelectedRows=e},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},save:function(){var e=this;this.$nextTick((function(){e.$refs.SaveUpdate.open({envId:e.searchForm.envId,groupId:e.searchForm.groupId})}))},config:function(e,t){this.$router.push({path:"/config",query:{clientId:t.id}})},update:function(e,t){var n=this;this.$nextTick((function(){n.$refs.SaveUpdate.open(t)}))},assign:function(e,t){var n=this;this.$nextTick((function(){n.$refs.Assign.open(t)}))},clone:function(e,t){var n=this;this.$nextTick((function(){var e=[];e.push(t),n.$refs.Clone.open(e)}))},cloneMany:function(){var e=this;this.currentSelectedRows&&0!=this.currentSelectedRows.length?this.$nextTick((function(){e.$refs.Clone.open(e.currentSelectedRows)})):this.$message({message:"您当前未选中任何客户端",type:"warning"})},imports:function(){this.importParam.visible=!0},importComplete:function(){this.importParam.visible=!1,this.getPage()},exports:function(){var e=this;this.currentSelectedRows&&0!=this.currentSelectedRows.length?this.$confirm("是否导出选中的客户端?","导出提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var t=e.currentSelectedRows.map((function(e){return e.id})),n=t.join();window.location.href=e.$API.client.exports(n)})).catch((function(t){console.log(t),e.$message({type:"info",message:"已取消导出"})})):this.$message({message:"您当前未选中任何客户端",type:"warning"})},deleteInRow:function(e,t){var n=this;this.$confirm("此操作将会删除该客户端，仅限超级管理员进行操作，是否继续?","危险操作",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){n.$API.client.deleteById(t.id).then((function(e){n.getPage(),n.$message.success(e.message)}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},handleNodeClick:function(e){this.searchForm.groupId=e.value,this.getPage()},envChange:function(){this.getPage()}}},U=V,z=(n("f346"),n("9f74"),Object(d["a"])(U,r,i,!1,null,"2bf434f2",null));t["default"]=z.exports},3846:function(e,t,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"520a":function(e,t,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,o=String.prototype.replace,l=i,a="lastIndex",s=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e[a]||0!==t[a]}(),c=void 0!==/()??/.exec("")[1],u=s||c;u&&(l=function(e){var t,n,l,u,p=this;return c&&(n=new RegExp("^"+p.source+"$(?!\\s)",r.call(p))),s&&(t=p[a]),l=i.call(p,e),s&&l&&(p[a]=p.global?l.index+l[0].length:t),c&&l&&l.length>1&&o.call(l[0],n,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(l[u]=void 0)})),l}),e.exports=l},"599d":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",{attrs:{filterable:e.filterable,clearable:e.clearable,placeholder:e.placeholder,multiple:e.multiple},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)},i=[],o=(n("96cf"),n("1da1")),l={name:"GroupSelect",props:{value:{type:String},type:{type:String},placeholder:{type:String,default:""},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},data:function(){return{options:[]}},computed:{selectValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},created:function(){this.getGroupList()},methods:{getGroupList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$API.group.getList();case 2:t=e.sent,this.options=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},a=l,s=n("2877"),c=Object(s["a"])(a,r,i,!1,null,null,null);t["a"]=c.exports},"5d89":function(e,t,n){},"5f1b":function(e,t,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},"65e1":function(e,t,n){"use strict";n("6762"),n("2fdb");var r=n("4360");function i(e,t){var n=t.value,i=r["a"].getters&&r["a"].getters.roles;if(!(n&&n instanceof Array))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");if(n.length>0){var o=n,l=i.some((function(e){return o.includes(e)}));l||e.parentNode&&e.parentNode.removeChild(e)}}var o={inserted:function(e,t){i(e,t)},update:function(e,t){i(e,t)}},l=function(e){e.directive("permission",o)};window.Vue&&(window["permission"]=o,Vue.use(l)),o.install=l;t["a"]=o},"6b54":function(e,t,n){"use strict";n("3846");var r=n("cb7c"),i=n("0bfb"),o=n("9e1e"),l="toString",a=/./[l],s=function(e){n("2aba")(RegExp.prototype,l,e,!0)};n("79e5")((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):a.name!=l&&s((function(){return a.call(this)}))},7865:function(e,t,n){"use strict";n("bc29")},"920f":function(e,t,n){},"9f74":function(e,t,n){"use strict";n("920f")},a481:function(e,t,n){"use strict";var r=n("cb7c"),i=n("4bf8"),o=n("9def"),l=n("4588"),a=n("0390"),s=n("5f1b"),c=Math.max,u=Math.min,p=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,(function(e,t,n,m){return[function(r,i){var o=e(this),l=void 0==r?void 0:r[t];return void 0!==l?l.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=m(n,e,this,t);if(i.done)return i.value;var p=r(e),d=String(this),f="function"===typeof t;f||(t=String(t));var g=p.global;if(g){var b=p.unicode;p.lastIndex=0}var x=[];while(1){var w=s(p,d);if(null===w)break;if(x.push(w),!g)break;var _=String(w[0]);""===_&&(p.lastIndex=a(d,o(p.lastIndex),b))}for(var y="",S=0,k=0;k<x.length;k++){w=x[k];for(var $=String(w[0]),I=c(u(l(w.index),d.length),0),R=[],C=1;C<w.length;C++)R.push(h(w[C]));var F=w.groups;if(f){var E=[$].concat(R,I,d);void 0!==F&&E.push(F);var O=String(t.apply(void 0,E))}else O=v($,d,I,R,F,t);I>=S&&(y+=d.slice(S,I)+O,S=I+$.length)}return y+d.slice(S)}];function v(e,t,r,o,l,a){var s=r+e.length,c=o.length,u=f;return void 0!==l&&(l=i(l),u=d),n.call(a,u,(function(n,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(s);case"<":a=l[i.slice(1,-1)];break;default:var u=+i;if(0===u)return n;if(u>c){var d=p(u/10);return 0===d?n:d<=c?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):n}a=o[u-1]}return void 0===a?"":a}))}}))},b0c5:function(e,t,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},bc29:function(e,t,n){},f346:function(e,t,n){"use strict";n("5d89")}}]);