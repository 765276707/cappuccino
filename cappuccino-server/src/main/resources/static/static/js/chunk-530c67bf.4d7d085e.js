(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-530c67bf"],{4468:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"10px"},attrs:{height:"80px"}},[a("div",{staticStyle:{padding:"5px",background:"#F2F6FC","border-radius":"5px"}},[a("div",{staticClass:"topbar"},[a("div",{staticClass:"left-panel"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.save}},[e._v("添加")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.deleteSelectedRows}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"right-panel"},[a("div",{staticClass:"right-panel-search"},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"角色",clearable:""},model:{value:e.searchForm.role,callback:function(t){e.$set(e.searchForm,"role",t)},expression:"searchForm.role"}},[a("el-option",{attrs:{label:"超级管理员",value:"SA"}}),e._v(" "),a("el-option",{attrs:{label:"普通管理员",value:"CA"}})],1),e._v(" "),a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"用户名/真实姓名/部门/职位"},model:{value:e.searchForm.searchText,callback:function(t){e.$set(e.searchForm,"searchText",t)},expression:"searchForm.searchText"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getPage}}),e._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh"},on:{click:e.refresh}}),e._v(" "),a("el-popover",{attrs:{width:"60",trigger:"click"}},[a("el-checkbox-group",{model:{value:e.columnSelecteds,callback:function(t){e.columnSelecteds=t},expression:"columnSelecteds"}},e._l(e.columnHeaders,(function(t){return a("el-checkbox",{key:t.prop,attrs:{label:t.prop}},[e._v(e._s(t.label))])})),1),e._v(" "),a("el-button",{attrs:{slot:"reference",icon:"el-icon-s-grid"},slot:"reference"})],1)],1)])])])]),e._v(" "),a("el-main",{staticStyle:{"padding-left":"10px","padding-right":"10px"}},[a("el-card",{attrs:{shadow:"always","body-style":"padding: 0px; min-height: 500px;"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","min-height":"450px"},attrs:{data:e.pageResult.list,"element-loading-text":"加载数据中","header-row-style":{height:"45px"},"header-cell-style":{background:"#F2F6FC"},"row-style":{height:"60px"}},on:{"selection-change":e.handleSelectedChange},scopedSlots:e._u([{key:"empty",fn:function(){return[a("el-empty",{attrs:{description:"暂无数据","image-size":100}})]},proxy:!0}])},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"编号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realname",label:"真实姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phoneNumber",label:"联系电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱地址"}}),e._v(" "),e.columnHeaders[0].isShow?a("el-table-column",{attrs:{prop:e.columnHeaders[0].prop,label:e.columnHeaders[0].label}}):e._e(),e._v(" "),e.columnHeaders[1].isShow?a("el-table-column",{attrs:{prop:e.columnHeaders[1].prop,label:e.columnHeaders[1].label}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return["SA"===t.row.role?a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("超级管理员")]):e._e(),e._v(" "),"CA"===t.row.role?a("el-tag",{attrs:{type:"primary",size:"mini"}},[e._v("普通管理员")]):e._e()]}}])}),e._v(" "),e.columnHeaders[2].isShow?a("el-table-column",{attrs:{prop:e.columnHeaders[2].prop,label:e.columnHeaders[2].label}}):e._e(),e._v(" "),e.columnHeaders[3].isShow?a("el-table-column",{attrs:{prop:e.columnHeaders[3].prop,label:e.columnHeaders[3].label}}):e._e(),e._v(" "),e.columnHeaders[4].isShow?a("el-table-column",{attrs:{prop:e.columnHeaders[4].prop,label:e.columnHeaders[4].label}}):e._e(),e._v(" "),e.columnHeaders[5].isShow?a("el-table-column",{attrs:{prop:e.columnHeaders[5].prop,label:e.columnHeaders[5].label}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.edit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-key"},on:{click:function(a){return e.resetPassword(t.$index,t.row)}}},[e._v("重置密码")]),e._v(" "),a("el-button",{staticStyle:{color:"#F56C6C"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.deleteInRow(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("pagination",{attrs:{total:e.pageResult.total},on:{"page-change":e.pageChange}})],1)],1),e._v(" "),a("save-update",{ref:"SaveUpdate",on:{success:e.getPage}})],1)},l=[],s=(a("ac6a"),a("96cf"),a("1da1")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("el-dialog",{attrs:{title:e.title,visible:e.visible,width:"600px","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"FORM",attrs:{model:e.form,rules:e.rule,"label-width":"120px"}},[a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{span:24}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{prop:"id"}},[a("el-input",{model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入真实姓名"},model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname",t)},expression:"form.realname"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"联系电话",prop:"phoneNumber"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入联系电话"},model:{value:e.form.phoneNumber,callback:function(t){e.$set(e.form,"phoneNumber",t)},expression:"form.phoneNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入电子邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"部门",prop:"deptName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入部门名称"},model:{value:e.form.deptName,callback:function(t){e.$set(e.form,"deptName",t)},expression:"form.deptName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"职位",prop:"jobName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入职位名称"},model:{value:e.form.jobName,callback:function(t){e.$set(e.form,"jobName",t)},expression:"form.jobName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"角色",prop:"role"}},[a("el-radio-group",{model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("el-radio",{attrs:{label:"SA"}},[e._v("超级管理员")]),e._v(" "),a("el-radio",{attrs:{label:"CA"}},[e._v("普通管理员")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){return e.close()}}},[e._v("关 闭")])],1)],1):e._e()},n=[],i={data:function(){return{title:"",visible:!1,form:{},rule:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}]},loading:!1}},methods:{submit:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.valid("FORM")){e.next=2;break}return e.abrupt("return");case 2:if(t=null,this.form.id){e.next=9;break}return e.next=6,this.$API.user.save(this.form);case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,this.$API.user.update(this.form);case 11:t=e.sent;case 12:this.$emit("success",this.form.id),this.$message.success(t.message),this.close();case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),valid:function(e){var t=!1;return this.$refs[e].validate((function(e){e&&(t=e)})),t},open:function(e){this.visible=!0,e.id?this.title="编辑账号":this.title="新增账号",this.form=Object.assign({},e)},close:function(){this.$refs["FORM"].resetFields(),this.$refs["FORM"].clearValidate(),this.visible=!1}}},c=i,u=a("2877"),p=Object(u["a"])(c,o,n,!1,null,null,null),m=p.exports,d={data:function(){return{searchForm:{role:"",searchText:""},searchText:"",pageResult:{total:0,pageNum:1,pageSize:10,list:[]},loading:!1,currentSelectedRows:[],columnHeaders:[{index:0,prop:"deptName",label:"部门名称",isShow:!0},{index:1,prop:"jobName",label:"职位名称",isShow:!0},{index:2,prop:"createTime",label:"创建时间",isShow:!0},{index:3,prop:"createUser",label:"创建者",isShow:!1},{index:4,prop:"updateTime",label:"更新时间",isShow:!1},{index:5,prop:"updateUser",label:"更新者",isShow:!1}],columnSelecteds:["deptName","jobName","createTime"]}},components:{SaveUpdate:m},mounted:function(){this.getPage()},watch:{columnSelecteds:function(e){var t=this,a=this.columnHeaders.filter((function(t){return-1==e.indexOf(t.prop)})).map((function(e){return e.prop}));this.columnHeaders.filter((function(e){var r=-1!=a.indexOf(e.prop);r?(e.isShow=!1,t.$nextTick((function(){t.$refs.Table.doLayout()}))):(e.isShow=!0,t.$nextTick((function(){t.$refs.Table.doLayout()})))}))}},methods:{getPage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$API.user.getPage(this.searchForm);case 3:t=e.sent,this.pageResult=t.data,this.loading=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refresh:function(){this.searchForm.role="",this.searchForm.searchText="",this.getPage()},pageChange:function(e,t){this.searchForm.pageNum=e,this.searchForm.pageSize=t,this.getPage()},handleSelectedChange:function(e){this.currentSelectedRows=e},save:function(){var e=this;this.$nextTick((function(){e.$refs.SaveUpdate.open({gender:"男",status:1,role:"CA"})}))},edit:function(e,t){var a=this;this.$nextTick((function(){a.$refs.SaveUpdate.open(t)}))},resetPassword:function(e,t){var a=this;this.$confirm("此操作将会重置用户【"+t.username+"】的密码，是否继续?","重置用户密码",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){a.$API.user.resetPassword(t.id).then((function(e){a.getPage(),a.$message.success(e.message)}))})).catch((function(){a.$message({type:"info",message:"已取消重置"})}))},deleteInRow:function(e,t){var a=this;this.$confirm("此操作将会删除该【"+t.username+"】用户，是否继续?","删除用户",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var e=[];e.push(t.id),a.$API.user.deleteById(e).then((function(e){a.getPage(),a.$message.success(e.message)}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},deleteSelectedRows:function(){var e=this;if(this.currentSelectedRows&&0!=this.currentSelectedRows.length)if(this.currentSelectedRows.length>10)this.$message({message:"单次最多同时删除10个用户",type:"warning"});else{var t="";this.currentSelectedRows.forEach((function(e){t=t+"【"+e.username+"】 "})),this.$confirm("此操作将会删除选中的"+t+"用户，是否继续?","删除用户",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){var t=e.currentSelectedRows.map((function(e){return e.id}));e.$API.user.deleteById(t).then((function(t){e.getPage(),e.$message.success(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}else this.$message({message:"您当前未选中任何用户",type:"warning"})}}},h=d,f=(a("82ef"),Object(u["a"])(h,r,l,!1,null,"43c03bbe",null));t["default"]=f.exports},"82ef":function(e,t,a){"use strict";a("8b9b")},"8b9b":function(e,t,a){}}]);